{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>The Allergen Filter</title>
    <!--<link href="css/bootstrap.min.css" rel="stylesheet">-->
    <link rel="stylesheet" href="{% static 'bootstrap-3.3.7/css/bootstrap.min.css' %}">
    <!-- <link href="css/index-style.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="{% static 'index-style.css' %}">
    <link href="https://fonts.googleapis.com/css?family=Caveat" rel="stylesheet">

    <script src="{% static 'jquery-1.12.4.min.js' %}"></script>
    <script src="{% static 'bootstrap-3.3.7/js/bootstrap.min.js' %}"></script>
  </head>
  <body>
    <header>
      <nav class="navbar navbar-inverse navbar-static-top">
      	<div class="container">
      		<div class="navbar-header">
            <div class="navbar-brand">
            <div class="logo">
              <div class="inner-logo">
                <a href="" class="af">AF<a href="">
              </div>
            </div>
      			<a href="#" >The Allergen Filter</a>
          </div>
      		</div>
      	</div>
      </nav>
    </header>
    <main>
    <div class="container">
        <div class="para">
      <p>The Allergen Filter provides a valuable database for searching and retrieving information about foods and potential allergens contained in their ingredients.
      To begin, enter the product name or barcode along with any allergens that you have. Then click search.</p>
        </div>
    </div>
      <div class = "container search-cat">
        <div class= "row">
          <div class="col-md-2 col-sm-2">
            <h4>Barcode:</h4>
          </div>
          <div class="col-md-3 col-sm-4">
            <div class = "input-group">
              <input type = "text" class = "barcode-search form-control" placeholder = "Barcode">
            </div>
          </div>
          <div class="col-md-2 col-sm-2">
            <button class = "bs btn btn-default">Search</button>
          </div>
        </div>

        <div class = "row">
          <h4 class="col-md-12">or</h4>
        </div>
        <div class = "row">
          <div class="col-md-2 col-sm-3">
            <h4>Product name:</h4>
          </div>
          <div class="col-md-3 col-sm-3">
            <div class = "input-group">
              <input type = "text" class = "form-control" placeholder = "Search product...">
            </div>
          </div>
          <div class="col-md-1 col-sm-3">
            <h4>Category:</h4>
          </div>
          <div class="col-md-3 col-sm-3">
            <select class="form-control">
              <option>Fruit</option>
              <option>Vegetable</option>
              <option>Meat</option>
              <option>Seafood</option>
              <option>Deli</option>
              <option>Bakery</option>
              <option>Dairy</option>
              <option>Eggs</option>
              <option>Fridge</option>
              <option>Pantry</option>
              <option>Freezer</option>
              <option>Drinks</option>
            </select>
          </div>
          <div class="col-md-3">
          </div>
        </div>
        <div class="row">
          <div class="col-md-1 col-sm-2">
            <h4>Allergen:</h4>
          </div>
          <div class="col-md-8 col-sm-10">
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
            <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
            <input type="text" list="allergens" id="authors" value="" placeholder="Allergens" class="form-control">
            <datalist id="allergens">
              <option value="Gluten">
              <option value="Crustacean">
              <option value="Eggs">
              <option value="Fish">
              <option value="Peanuts">
              <option value="Soybean">
              <option value="Milk">
              <option value="Nuts">
              <option value="Celery">
              <option value="Mustard">
              <option value="Sesame">
              <option value="Lupin">
              <option value="Molluscs">
            </datalist>
            <script>
              var datalist = jQuery('datalist');
              var options = jQuery('datalist option');
              var optionsarray = jQuery.map(options ,function(option) {
              		return option.value;
              });
              var input = jQuery('input[list]');
              var inputcommas = (input.val().match(/,/g)||[]).length;
              var separator = ',';

              function filldatalist(prefix) {
              	if (input.val().indexOf(separator) > -1 && options.length > 0) {
              		datalist.empty();
              		for (i=0; i < optionsarray.length; i++ ) {
              			if (prefix.indexOf(optionsarray[i]) < 0 ) {
              				datalist.append('<option value="'+prefix+optionsarray[i]+'">');
              			}
              		}
              	}
              }
              input.bind("change paste keyup",function() {
              	var inputtrim = input.val().replace(/^\s+|\s+$/g, "");
                //console.log(inputtrim);
              	var currentcommas = (input.val().match(/,/g)||[]).length;
                //console.log(currentcommas);
              	if (inputtrim != input.val()) {
              		if (inputcommas != currentcommas) {
              			var lsIndex = inputtrim.lastIndexOf(separator);
              			var str = (lsIndex != -1) ? inputtrim.substr(0, lsIndex)+", " : "";
              			filldatalist(str);
              			inputcommas = currentcommas;
              		}
              		input.val(inputtrim);
              	}
              });
            </script>
          </div>
          <div class="col-md-2 col-sm-12">
            <button class = "btn btn-default">Search</button>
          </div>
        </form>
      </div>

      <!--Search Results-->
      <div class="container search-results">
        <h3>Search Results:</h3>
        <ul class="result-items">
		{% for result in results %}
			<li class="col-md-3 col-sm-6 col-xs-12">
            <div class="col-md-12">
              <h3>{{ result.name }}</h3>
              <img src="{{ result.picture }}" height="100px">
              <h4>Available in</h4>
              <ul>
                <li><a href="#">Woolworths</a></li>
                <li><a href="#">Coles</a></li>
              </ul>
            </div>
          </li>
		{% endfor %}
        </ul>
      </div>

      <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>-->
      <!--<script src="js/bootstrap.min.js"></script>-->
    </main>
  </body>
  <script>
    function unselect() {
      for (var i=0; i<13; i++){
        document.getElementById("allergen"+i).checked = false;
      }
    }
  </script>
  <footer>
    - Made in 24 hours for UniHack Sydney 2018 -
  </footer>
</html>
